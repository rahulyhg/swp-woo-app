jQuery(function ($) {
    var params = connector_popup_script_params; var custom_smuploader; jQuery('#app-add-popup').click(function (e) {
        e.preventDefault(); if (custom_smuploader) { custom_smuploader.open(); return; }
        custom_smuploader = wp.media.frames.file_frame = wp.media({ title: 'Save Image', button: { text: 'Save Image' }, multiple: false }); custom_smuploader.on('select', function () { var selection = custom_smuploader.state().get('selection'); selection.map(function (attachment) { attachment = attachment.toJSON(); var urlsm = attachment.url; var checkimage = urlsm.split('.').pop().toUpperCase(); if (checkimage.length < 1) { return false; } else if (checkimage != "PNG" && checkimage != "JPG" && checkimage != "GIF" && checkimage != "JPEG") { alert("invalid extension " + checkimage); return false; } else { var attid = attachment.id; jQuery('#app-content-popup').attr('src', urlsm); jQuery('#connector-popup-url').val(urlsm); jQuery('#connector-delete-popup').removeClass('connector-hidden'); jQuery('#connector-content-popup').removeClass('connector-hidden'); } }); }); custom_smuploader.open(); return false;
    }); jQuery('#connector-delete-popup').click(function () { if (confirm("Are you sure?")) { jQuery('#app-content-popup').attr('src'); jQuery('#connector-popup-url').val(''); jQuery('#connector-delete-popup').addClass('connector-hidden'); jQuery('#connector-content-popup').addClass('connector-hidden'); } else { return false; } })
    jQuery('#connector-content-popup-close').click(function () { if (confirm("Are you sure?")) { jQuery('#app-content-popup').attr('src'); jQuery('#connector-popup-url').val(''); jQuery('#connector-delete-popup').addClass('connector-hidden'); jQuery('#connector-content-popup').addClass('connector-hidden'); } else { return false; } })
    });